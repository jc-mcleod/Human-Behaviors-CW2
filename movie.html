<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Movie Rentals</title>
    <link href="styles/movie.css" rel="stylesheet"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap"
      rel="stylesheet"/>
     <link rel="icon" type="image/x-icon" href="images/icons/favicon.ico">
  </head>
  <body>
    <div class="horizontal-navbar">
      <ul>
	    <li class="horizontal-navbar-button">
          <a href="index.html" class="no-decoration"><img src="images/icons/logo-text-main.png" width=45% height=53% id="clickable-logo"></a>
        </li>
	<li class="horizontal-navbar-button">
          <a href="login.html" id="login-signup">Log in/Sign Up</a>
        </li>
	<li>
          <a href="basket.html"><img src="images/icons/basket.png" id="clickable-basket"></a>
	</li>
      </ul>

    </div>
    <div id="main">
    <nav>
	<p><strong>Search:</strong></p>
	<input type="text" placeholder="I am looking for...">
	<br />
        <br />
        <h4>Genres: </h4>
        <ul>
          <li>Adventure</li>
          <li>Animation</li>
          <li>Science fiction</li>
          <li>Comedy</li>
          <li>Drama</li>
          <li>Horror</li>
          <li>Action</li>
        </ul>
        <br />
        <br />
        <br />
	<!-- <button onclick="localStorage.setItem('basket', '[]')">Empty Basket</button> --> 
        <br />
        <br />
      </nav>
      <article>
      	<br>
      	<h1 id="movie-title"></h1>
      	<img class="picture" id="movie-image" src="" />
      	<br>
	<strong>Release Date: </strong>
	<p id="movie-release-date"></p>
	<strong>Genres: </strong>
        <p id="movie-genre"></p>
        <strong>Director: </strong>
        <p id="movie-director"></p>
        <strong>Actors: </strong>
        <p id="movie-actors"></p>
        <strong>Price per day: </strong>
        <p id="movie-price"></p>
	<strong>Description: </strong>
        <p id="movie-description"></p>
	
	<label> Days to rent:</label><br />
        <input id="days-to-rent" value="3" /><br />
	<button style="width: 100px; height: 50px" onclick="addToBasket()">Add to Basket</button>
      
       
      </article>
    </div>
  </body>

  <script src="./js/movies.js"></script>
  <script>
    // Takes the ID from the URL and loads all the data into the DOM
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const movieId = parseInt(urlParams.get("id"));
    const movie = movies.find((movie) => movie.id === movieId);
	
    document.getElementById("movie-title").textContent = movie.name;
    document.getElementById("movie-image").src = movie.image;
    document.getElementById("movie-genre").textContent = movie.genre;
    document.getElementById("movie-director").textContent = movie.director;
    document.getElementById("movie-actors").textContent = movie.actors;
    document.getElementById("movie-description").textContent = movie.description;
    document.getElementById("movie-release-date").textContent = movie.releaseDate;
    document.getElementById("movie-price").textContent = movie.price;
	
	// Prab - Adding working 'Add to basket' button
	function addToBasket() {
		const movieId2 = parseInt(urlParams.get("id"));
		const movie2 = movies.find((movie2) => movie2.id === movieId2);
        // Get the basket from local storage, or just an empty array if it doesn't exist
        	const basket = JSON.parse(localStorage.getItem("basket") ?? "[]");

        // Add the amount of days they want to rent
       	movie2.rentDays = parseInt(document.getElementById("days-to-rent").value);
        	basket.push(movie2);
        	localStorage.setItem("basket", JSON.stringify(basket));
	}
  </script>
</html>
